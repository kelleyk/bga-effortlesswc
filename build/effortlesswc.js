/*! bga-effortlesswc 2024-06-27 */
var __extends=this&&this.__extends||function(){var f=function(t,e){return(f=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}f(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}(),GameBasics=function(e){function t(){var t=e.call(this)||this;return t.curstate=null,t.pendingUpdate=!1,t.currentPlayerWasActive=!1,console.log("(BASICS) game constructor"),t}return __extends(t,e),t.prototype.setup=function(t){console.log("(BASICS) Starting game setup"),this.gamedatas=t},t.prototype.onEnteringState=function(t,e){this.curstate=t,e=e?e.args:null,this.callfn("onEnteringState_"+t,e),this.pendingUpdate&&(this.onUpdateActionButtons(t,e),this.pendingUpdate=!1)},t.prototype.onLeavingState=function(t){this.currentPlayerWasActive=!1},t.prototype.onUpdateActionButtons=function(t,e){console.log("(BASICS) onUpdateActionButtons()"),this.curstate!==t?this.pendingUpdate=!0:(this.pendingUpdate=!1,gameui.isCurrentPlayerActive()&&!1===this.currentPlayerWasActive?(console.log("onUpdateActionButtons: "+t,e,this.debugStateInfo()),this.currentPlayerWasActive=!0,this.callfn("onUpdateActionButtons_"+t,e)):this.currentPlayerWasActive=!1)},t.prototype.debugStateInfo=function(){var t=gameui.isCurrentPlayerActive(),e=!1;return"undefined"!=typeof g_replayFrom&&(e=!0),{instantaneousMode:!!gameui.instantaneousMode,isCurrentPlayerActive:t,replayMode:e}},t.prototype.ajaxcallwrapper=function(t,e,o){(e=e||{}).lock=!0,gameui.checkAction(t)&&gameui.ajaxcall("/"+gameui.game_name+"/"+gameui.game_name+"/"+t+".html",e,gameui,function(t){},o)},t.prototype.onScriptError=function(t,e,o){if(!gameui.page_is_unloading)return console.error(t),this.inherited(arguments)},t.prototype.callfn=function(t,e){if(void 0!==this[t])return console.log("Calling "+t,e),this[t](e)},t.prototype.triggerUpdateActionButtons=function(){this.updatePageTitle()},t}(GameGui=function(){}),__extends=this&&this.__extends||function(){var f=function(t,e){return(f=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}))(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}f(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}(),GameBody=function(e){function t(){var t=e.call(this)||this;return console.log("effortlesswc constructor"),t}return __extends(t,e),t.prototype.setup=function(t){for(var e in console.log("Starting game setup"),t.players)t.players.hasOwnProperty(e)&&(e=t.players[e],console.log(e));this.setupPlayArea(t.mutableBoardState),this.setupNotifications(),console.log("Ending game setup")},t.prototype.setupPlayArea=function(t){for(var e=0;e<6;++e)dojo.place(this.format_block("jstpl_setloc_panel",{classes:"",id:"ewc_setloc_panel_"+e}),$("ewc_setlocarea_column_"+e%2));this.applyMutableBoardState(t)},t.prototype.applyMutableBoardState=function(t){for(var e=this,o=0,f=Object.values(t.locations);o<f.length;o++){var s=f[o];document.querySelector("#ewc_setloc_panel_"+s.sublocationIndex+" .ewc_setloc_location").classList.add(s.cardType.replace(":","_"))}for(var i=0,h=Object.values(t.settings);i<h.length;i++){var a=h[i];document.querySelector("#ewc_setloc_panel_"+a.sublocationIndex+" .ewc_setloc_setting").classList.add(a.cardType.replace(":","_"))}for(var r=0,n=Object.values(t.cards);r<n.length;r++){var c,d=n[r];console.log("*** card",d),d.faceDown||(c=document.querySelector("#ewc_setloc_panel_"+d.sublocationIndex+" .ewc_setloc_cards"),console.log("*** parentEl",c),dojo.place(this.format_block("jstpl_playarea_card",{cardType:d.cardType,id:d.id}),c))}console.log("*** qsa ***"),document.querySelectorAll(".tmp_scalable_card").forEach(function(t){t.classList.contains("tmp_scaled_card")||(t.classList.add("tmp_scaled_card"),e.rescaleSprite(t,.5))}),document.querySelectorAll(".tmp_scalable_cube").forEach(function(t){t.classList.contains("tmp_scaled_cube")||(t.classList.add("tmp_scale_cube"),e.rescaleSpriteCube(t,.6))}),document.querySelectorAll(".tmp_tintable").forEach(function(t){t.classList.contains("tmp_tinted")||(t.classList.add("tmp_tinted"),t.classList.contains("ewc_playercolor_teal")&&e.tintSprite(t,"#00b796"),t.classList.contains("ewc_playercolor_pink")&&e.tintSprite(t,"#ff5fa2"))})},t.prototype.rescaleSprite=function(t,e){t.style.height=363.6*e+"px",t.style.width=233.4*e+"px";var o=3334.2*e+"px "+3328.2*e+"px";console.log("*** bgSize = ",o),t.style.backgroundSize=o,console.log("*** >> bgPos = ",t.style.backgroundPosition),t.style.backgroundPosition=-700.2*e+"px "+-1090.8*e+"px",console.log("*** >> bgPos = ",t.style.backgroundPosition)},t.prototype.rescaleSpriteCube=function(t,e){console.log("** rescaleSpriteCube()",t,e),t.style.height=30*e+"px",t.style.width=30*e+"px";var o=312*e+"px "+302.4*e+"px",o=(console.log("*** bgSize = ",o),t.style.backgroundSize=o,t.style.maskSize=o,-276*e+"px "+-121.2*e+"px");t.style.backgroundPosition=o,t.style.maskPosition=o},t.prototype.tintSprite=function(t,e){t.style.backgroundBlendMode="multiply",t.style.backgroundColor=e},t.prototype.onEnteringState=function(t,e){console.log("Entering state",t,e)},t.prototype.onLeavingState=function(t){console.log("Leaving state: "+t)},t.prototype.onUpdateActionButtons=function(t,e){console.log("onUpdateActionButtons: "+t,e),this.isCurrentPlayerActive()},t.prototype.setupNotifications=function(){console.log("notifications subscriptions setup")},t}(GameBasics),StaticDataSprites=(define(["dojo","dojo/_base/declare","ebg/core/gamegui","ebg/counter","ebg/stock","ebg/zone"],function(t,e){e("bgagame.effortlesswc",ebg.core.gamegui,new GameBody)}),function(){function t(){}return t.totalWidth=5557,t.totalHeight=5547,t.spriteMetadata={card_armor_assassin_chest:{width:389,height:606,offsetX:0,offsetY:0},card_armor_assassin_feet:{width:389,height:606,offsetX:-389,offsetY:0},card_armor_assassin_hands:{width:389,height:606,offsetX:-778,offsetY:0},card_armor_assassin_head:{width:389,height:606,offsetX:-1167,offsetY:0},card_armor_leather_chest:{width:389,height:606,offsetX:0,offsetY:-606},card_armor_leather_feet:{width:389,height:606,offsetX:-389,offsetY:-606},card_armor_leather_hands:{width:389,height:606,offsetX:-778,offsetY:-606},card_armor_leather_head:{width:389,height:606,offsetX:-1167,offsetY:-606},card_armor_mage_chest:{width:389,height:606,offsetX:-1556,offsetY:0},card_armor_mage_feet:{width:389,height:606,offsetX:-1556,offsetY:-606},card_armor_mage_hands:{width:389,height:606,offsetX:0,offsetY:-1212},card_armor_mage_head:{width:389,height:606,offsetX:-389,offsetY:-1212},card_armor_obsidian_chest:{width:389,height:606,offsetX:-778,offsetY:-1212},card_armor_obsidian_feet:{width:389,height:606,offsetX:-1167,offsetY:-1212},card_armor_obsidian_hands:{width:389,height:606,offsetX:-1556,offsetY:-1212},card_armor_obsidian_head:{width:389,height:606,offsetX:-1945,offsetY:0},card_armor_plate_chest:{width:389,height:606,offsetX:-1945,offsetY:-606},card_armor_plate_feet:{width:389,height:606,offsetX:-1945,offsetY:-1212},card_armor_plate_hands:{width:389,height:606,offsetX:-2334,offsetY:0},card_armor_plate_head:{width:389,height:606,offsetX:-2334,offsetY:-606},card_armor_scale_chest:{width:389,height:606,offsetX:-2334,offsetY:-1212},card_armor_scale_feet:{width:389,height:606,offsetX:0,offsetY:-1818},card_armor_scale_hands:{width:389,height:606,offsetX:-389,offsetY:-1818},card_armor_scale_head:{width:389,height:606,offsetX:-778,offsetY:-1818},card_attr_cha_1:{width:389,height:606,offsetX:-1167,offsetY:-1818},card_attr_cha_2:{width:389,height:606,offsetX:-1556,offsetY:-1818},card_attr_dex_1:{width:389,height:606,offsetX:-1945,offsetY:-1818},card_attr_dex_2:{width:389,height:606,offsetX:-2334,offsetY:-1818},card_attr_int_1:{width:389,height:606,offsetX:-2723,offsetY:0},card_attr_int_2:{width:389,height:606,offsetX:-2723,offsetY:-606},card_attr_str_1:{width:389,height:606,offsetX:-2723,offsetY:-1212},card_attr_str_2:{width:389,height:606,offsetX:-2723,offsetY:-1818},card_attr_wis_1:{width:389,height:606,offsetX:0,offsetY:-2424},card_attr_wis_2:{width:389,height:606,offsetX:-389,offsetY:-2424},card_back:{width:389,height:606,offsetX:-778,offsetY:-2424},card_dwarf:{width:389,height:605,offsetX:-4279,offsetY:-1818},card_elf:{width:389,height:605,offsetX:-4279,offsetY:-2423},card_exp:{width:389,height:606,offsetX:-1167,offsetY:-2424},card_fairy:{width:389,height:605,offsetX:-4279,offsetY:-3028},card_gnome:{width:389,height:605,offsetX:-4279,offsetY:-3633},card_goblin:{width:389,height:605,offsetX:-4668,offsetY:0},card_grit:{width:389,height:606,offsetX:-1556,offsetY:-2424},card_human:{width:389,height:605,offsetX:-4668,offsetY:-605},card_item_1:{width:389,height:606,offsetX:-1945,offsetY:-2424},card_item_10:{width:389,height:606,offsetX:-2334,offsetY:-2424},card_item_11:{width:389,height:606,offsetX:-2723,offsetY:-2424},card_item_12:{width:389,height:606,offsetX:-3112,offsetY:0},card_item_13:{width:389,height:606,offsetX:-3112,offsetY:-606},card_item_14:{width:389,height:606,offsetX:-3112,offsetY:-1212},card_item_15:{width:389,height:606,offsetX:-3112,offsetY:-1818},card_item_16:{width:389,height:606,offsetX:-3112,offsetY:-2424},card_item_17:{width:389,height:606,offsetX:-3501,offsetY:0},card_item_18:{width:389,height:606,offsetX:-3501,offsetY:-606},card_item_19:{width:389,height:606,offsetX:-3501,offsetY:-1212},card_item_2:{width:389,height:606,offsetX:-3501,offsetY:-1818},card_item_20:{width:389,height:606,offsetX:-3501,offsetY:-2424},card_item_21:{width:389,height:606,offsetX:0,offsetY:-3030},card_item_3:{width:389,height:606,offsetX:-389,offsetY:-3030},card_item_4:{width:389,height:606,offsetX:-778,offsetY:-3030},card_item_5:{width:389,height:606,offsetX:-1167,offsetY:-3030},card_item_6:{width:389,height:606,offsetX:-1556,offsetY:-3030},card_item_7:{width:389,height:606,offsetX:-1945,offsetY:-3030},card_item_8:{width:389,height:606,offsetX:-2334,offsetY:-3030},card_item_9:{width:389,height:606,offsetX:-2723,offsetY:-3030},card_orc:{width:389,height:605,offsetX:-4668,offsetY:-1210},class_alchemist:{width:389,height:605,offsetX:-4668,offsetY:-1815},class_artificer:{width:389,height:605,offsetX:-4668,offsetY:-2420},class_barbarian:{width:389,height:605,offsetX:-4668,offsetY:-3025},class_bard:{width:389,height:605,offsetX:-4668,offsetY:-3630},class_cleric:{width:389,height:605,offsetX:0,offsetY:-4242},class_druid:{width:389,height:605,offsetX:-389,offsetY:-4242},class_fighter:{width:389,height:605,offsetX:-778,offsetY:-4242},class_merchant:{width:389,height:605,offsetX:-1167,offsetY:-4242},class_monk:{width:389,height:605,offsetX:-1556,offsetY:-4242},class_necromancer:{width:389,height:605,offsetX:-1945,offsetY:-4242},class_paladin:{width:389,height:605,offsetX:-2334,offsetY:-4242},class_ranger:{width:389,height:605,offsetX:-2723,offsetY:-4242},class_rogue:{width:389,height:605,offsetX:-3112,offsetY:-4242},class_wizard:{width:389,height:605,offsetX:-3501,offsetY:-4242},threat_threat_1:{width:389,height:606,offsetX:-3112,offsetY:-3030},threat_threat_10:{width:389,height:606,offsetX:-3501,offsetY:-3030},threat_threat_11:{width:389,height:606,offsetX:-3890,offsetY:0},threat_threat_12:{width:389,height:606,offsetX:-3890,offsetY:-606},threat_threat_13:{width:389,height:606,offsetX:-3890,offsetY:-1212},threat_threat_14:{width:389,height:606,offsetX:-3890,offsetY:-1818},threat_threat_15:{width:389,height:606,offsetX:-3890,offsetY:-2424},threat_threat_16:{width:389,height:606,offsetX:-3890,offsetY:-3030},threat_threat_17:{width:389,height:606,offsetX:0,offsetY:-3636},threat_threat_18:{width:389,height:606,offsetX:-389,offsetY:-3636},threat_threat_19:{width:389,height:606,offsetX:-778,offsetY:-3636},threat_threat_2:{width:389,height:606,offsetX:-1167,offsetY:-3636},threat_threat_20:{width:389,height:606,offsetX:-1556,offsetY:-3636},threat_threat_21:{width:389,height:606,offsetX:-1945,offsetY:-3636},threat_threat_3:{width:389,height:606,offsetX:-2334,offsetY:-3636},threat_threat_4:{width:389,height:606,offsetX:-2723,offsetY:-3636},threat_threat_5:{width:389,height:606,offsetX:-3112,offsetY:-3636},threat_threat_6:{width:389,height:606,offsetX:-3501,offsetY:-3636},threat_threat_7:{width:389,height:606,offsetX:-3890,offsetY:-3636},threat_threat_8:{width:389,height:606,offsetX:-4279,offsetY:0},threat_threat_9:{width:389,height:606,offsetX:-4279,offsetY:-606},threat_threat_vacant:{width:389,height:606,offsetX:-4279,offsetY:-1212},location_cabin:{width:500,height:350,offsetX:-3890,offsetY:-4242},location_caravan:{width:500,height:350,offsetX:-4390,offsetY:-4242},location_cave:{width:500,height:350,offsetX:-5057,offsetY:0},location_city:{width:500,height:350,offsetX:-5057,offsetY:-350},location_coliseum:{width:500,height:350,offsetX:-5057,offsetY:-700},location_crypt:{width:500,height:350,offsetX:-5057,offsetY:-1050},location_docks:{width:500,height:350,offsetX:-5057,offsetY:-1400},location_dungeon:{width:500,height:350,offsetX:-5057,offsetY:-1750},location_forest:{width:500,height:350,offsetX:-5057,offsetY:-2100},location_garden:{width:500,height:350,offsetX:-5057,offsetY:-2450},location_laboratory:{width:500,height:350,offsetX:-5057,offsetY:-2800},location_labyrinth:{width:500,height:350,offsetX:-5057,offsetY:-3150},location_library:{width:500,height:350,offsetX:-5057,offsetY:-3500},location_market:{width:500,height:350,offsetX:-5057,offsetY:-3850},location_observatory:{width:500,height:350,offsetX:-5057,offsetY:-4200},location_portal:{width:500,height:350,offsetX:0,offsetY:-4847},location_prison:{width:500,height:350,offsetX:-500,offsetY:-4847},location_river:{width:500,height:350,offsetX:-1e3,offsetY:-4847},location_stables:{width:500,height:350,offsetX:-1500,offsetY:-4847},location_temple:{width:500,height:350,offsetX:-2e3,offsetY:-4847},location_tunnels:{width:500,height:350,offsetX:-2500,offsetY:-4847},setting_active:{width:305,height:350,offsetX:-3e3,offsetY:-4847},setting_barren:{width:305,height:350,offsetX:-3305,offsetY:-4847},setting_battling:{width:305,height:350,offsetX:-3610,offsetY:-4847},setting_capable:{width:305,height:350,offsetX:-3915,offsetY:-4847},setting_corrupted:{width:305,height:350,offsetX:-4220,offsetY:-4847},setting_crowded:{width:305,height:350,offsetX:-4525,offsetY:-4847},setting_eerie:{width:305,height:350,offsetX:-4830,offsetY:-4847},setting_equipped:{width:305,height:350,offsetX:-5135,offsetY:-4847},setting_ghostly:{width:305,height:350,offsetX:0,offsetY:-5197},setting_hidden:{width:305,height:350,offsetX:-305,offsetY:-5197},setting_holy:{width:305,height:350,offsetX:-610,offsetY:-5197},setting_lively:{width:305,height:350,offsetX:-915,offsetY:-5197},setting_magical:{width:305,height:350,offsetX:-1220,offsetY:-5197},setting_nonexistent:{width:305,height:350,offsetX:-1525,offsetY:-5197},setting_overgrown:{width:305,height:350,offsetX:-1830,offsetY:-5197},setting_peaceful:{width:305,height:350,offsetX:-2135,offsetY:-5197},setting_quiet:{width:305,height:350,offsetX:-2440,offsetY:-5197},setting_secret:{width:305,height:350,offsetX:-2745,offsetY:-5197},setting_sheltered:{width:305,height:350,offsetX:-3050,offsetY:-5197},setting_starved:{width:305,height:350,offsetX:-3355,offsetY:-5197},setting_transcendent:{width:305,height:350,offsetX:-3660,offsetY:-5197},setting_traveling:{width:305,height:350,offsetX:-3965,offsetY:-5197},setting_treacherous:{width:305,height:350,offsetX:-4270,offsetY:-5197}},t}());